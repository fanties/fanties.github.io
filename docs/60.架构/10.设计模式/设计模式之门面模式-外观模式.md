---
title: 设计模式之门面模式/外观模式
date: 2020-12-10 09:00:00
sidebar: auto
categories: 
  - 设计模式
tags: 
  - Java
  - 设计模式
publish: true
permalink: /pages/bcbecf/
---

> 门面模式也叫外观模式

### 基本概念
提供一个统一的接口去访问多个子系统的多个不同的接口，它为子系统中的一组接口提供一个统一的高层接口。使用子系统更容易使用。

本质：就是化零为整；引入一个中介类，把各个分散的功能组合成一个整体，相当于聚合各个类的各个接口，客户端要访问或者调用，只需要看门面接口就行了；

这两年流行微服务，即化整为零，把一个大服务拆分成一个个零部件； 
而门面模式则是反其道，是化零为整；

### 目的
为了用户使用方便，把过度拆分的分散功能，组合成一个整体，对外提供一个统一的接口

### 实现方案
本质：引入一个第三方中介类，这个类集合了多个零部件类的功能，实际功能则委托给这些零部件对象，这个类只是做为对外的统一接口，只是一个马甲；

引入中介对象
有许多细粒度的小对象
中介对象暴露了这些小对象的功能；
中介对象实际功能委托给这些小对象
中介对象提供给外部使用（对外隐藏那些小对象）

### 编程实现
```java
class ModuleA {
    /**
     * 提供给子系统外部使用的方法
     */
    public void a1(){};
    /**
     * 子系统内部模块之间相互调用时使用的方法
     */
    private void a2(){};
    private void a3(){};
}
class ModuleB {
    /**
     * 提供给子系统外部使用的方法
     */
    public void b1(){};
    
    /**
     * 子系统内部模块之间相互调用时使用的方法
     */
    private void b2(){};
    private void b3(){};
}
class ModuleFacade {
    
    ModuleA a = new ModuleA();
    ModuleB b = new ModuleB();
    /**
     * 下面这些是A、B模块对子系统外部提供的方法
     */
    public void a1(){
        a.a1();
    }
    public void b1(){
        b.b1();
    }
}

// 客户端调用，只需要看门面即可，与具体模块解耦合
class Client {
    public static void main(String[] args) {
        Facade facade = new Facade();
        facade.a1();
        facade.a2();
    }
}
```

### 门面模式的优点
松散耦合: 门面模式松散了客户端与子系统的耦合关系，让子系统内部的模块能更容易扩展和维护。

简单易用: 门面模式让子系统更加易用，客户端不再需要了解子系统内部的实现，也不需要跟众多子系统内部的模块进行交互，只需要跟门面类交互就可以了。

更好的划分访问层次: 通过合理使用Facade，可以帮助我们更好地划分访问的层次。有些方法是对系统外的，有些方法是系统内部使用的。把需要暴露给外部的功能集中到门面中，这样既方便客户端使用，也很好地隐藏了内部的细节。

### 缺点
不规范的编程方式 
没有面向抽象编程，而是通过增加中介层，转换服务提供方的服务接口；

### 应用场景
A：简化子系统复杂性时。
B：监控所有子系统时；通过门面控制了入口，可以统一监控；
C：希望封装和隐藏子系统时；
D：两历史系统进行改造并打通关系时；

### 注意事项
“与代理模式的区别” 
在了解门面模式时，会发现它不仅与代理模式很像，与装饰器模式也很类似； 
它们之间到底有什么样的区别呢?

相似点： 
- 都引入了中介类（对象） 
- 中介对象都引用并把功能委托给了原对象 
- 都起到了”代理”功能

区别 
- 代理侧重于对原对象的访问控制（当然也可以不是控制而是功能增强） 
- 代理与原类实现相同的抽象（相同接口或直接继承原业） 
- 代理只代理一个类 
- 门面侧重于功能整合（多个小系统或小对象整合成一个功能丰富的大对象） 
- 门面可以与子系统具有不同的抽象（具有不同的接口，可以对方法重新起名） 
- 门面代理的是一系列类

### 参考文献

[23种设计模式-门面模式(外观模式)](https://blog.csdn.net/yangspgao/article/details/80602794)