(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{394:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("用了这么多年的Idea，也用过不少Idea插件，今年刚好认真去学习了一下Idea插件的开发。")]),t._v(" "),a("p",[t._v("这篇文章主要是进行Idea插件开发的快速入门，能够快速把Hello world搞定。")]),t._v(" "),a("h2",{attrs:{id:"一、环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、环境准备"}},[t._v("#")]),t._v(" 一、环境准备")]),t._v(" "),a("h3",{attrs:{id:"_1-1-jdk11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-jdk11"}},[t._v("#")]),t._v(" 1.1 JDK11")]),t._v(" "),a("p",[t._v("idea开发需要准备一个基础JDK，主要是用于源码编译。")]),t._v(" "),a("p",[t._v("我们使用Gradle创建工程，可以直接引入idea开发的gradle插件，会自动引入idea开发自身需要的sdk。")]),t._v(" "),a("p",[t._v("如果不通过gradle创建插件，那么是需要单独配置idea的SDK的")]),t._v(" "),a("h3",{attrs:{id:"_1-2-idea2020以上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-idea2020以上"}},[t._v("#")]),t._v(" 1.2 Idea2020以上")]),t._v(" "),a("p",[t._v("通过Gradle创建项目，可以在gradle中指定用于调试的idea版本，gradle将会自动下载")]),t._v(" "),a("p",[t._v("如果下载太慢，可以配置使用本地idea用于调试，但是必须指定本地社区版本idea才可以进行调试")]),t._v(" "),a("h2",{attrs:{id:"二、idea插件工程创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、idea插件工程创建"}},[t._v("#")]),t._v(" 二、Idea插件工程创建")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121047.png",alt:"20221203121047"}})]),t._v(" "),a("p",[t._v("上图是Idea2021版本的创建工程视图，对于Idea2022版本，有着较大的区别。")]),t._v(" "),a("p",[t._v("step1:\n选择Gradle")]),t._v(" "),a("p",[t._v("step2:\nProject SDK选择 JDK11")]),t._v(" "),a("p",[t._v("step3:\n依赖包勾选Java和Intellij Platform Plugin")]),t._v(" "),a("p",[t._v("step4:\n点击Next")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("Kotlin DSL build script，这个勾选了，那么Gradle会使用.kts文件管理依赖，不勾选，那么使用的是Groovy管理依赖\n如果项目中有kotlin代码，那么还需要勾选 Kotlin/JVM的依赖\n当然，上面选择的都是可以在打开工程后修改的")])]),t._v(" "),a("p",[t._v("step5:")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121306.png",alt:"20221203121306"}})]),t._v(" "),a("p",[t._v("填写项目名和项目保存地址")]),t._v(" "),a("p",[t._v("Finish")]),t._v(" "),a("p",[t._v("完成后等待Idea打开项目")]),t._v(" "),a("h2",{attrs:{id:"三、idea工程结构介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、idea工程结构介绍"}},[t._v("#")]),t._v(" 三、Idea工程结构介绍")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121404.png",alt:"20221203121404"}})]),t._v(" "),a("p",[t._v(".gradle目录是gradle使用的\ngradle目录是配置wrapper，用于指定编译使用的gradle版本，wrapper目录需要上传git，保证所有人使用相同gradle版本编译项目\ngradlew是linux/macos的gradle脚本\ngradlew.bat是windows的gradle脚本\nsettings.gradle是配置gradle工程信息的\nbuild.gradle文件是项目核心配置，其中group相当于maven的坐标，version是jar的版本，也是插件的版本")]),t._v(" "),a("h3",{attrs:{id:"plugin-xml介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugin-xml介绍"}},[t._v("#")]),t._v(" plugin.xml介绍：")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121421.png",alt:"20221203121421"}})]),t._v(" "),a("p",[t._v("denpends是用于声明依赖的：")]),t._v(" "),a("p",[t._v("表示该插件必须在具备这些依赖的idea上面才可以正常运行")]),t._v(" "),a("p",[t._v("例如，该插件依赖maven，那么只有在有maven模块的InteliJ平台运行，比如idea，而例如pycharm就不能运行该插件")]),t._v(" "),a("h2",{attrs:{id:"四、解决乱码问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、解决乱码问题"}},[t._v("#")]),t._v(" 四、解决乱码问题")]),t._v(" "),a("h3",{attrs:{id:"_4-1-编译时乱码解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-编译时乱码解决"}},[t._v("#")]),t._v(" 4.1 编译时乱码解决")]),t._v(" "),a("p",[t._v("​编译时报 GBK 错误 解决方案 : 在 build.gradle 中添加如下代码 , 该项在根节点下即可 , 与 plugins , repositories , dependencies 同级 ;")]),t._v(" "),a("div",{staticClass:"language-groovy line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("JavaCompile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encoding "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token interpolation-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UTF-8"')])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_4-2-控制台乱码解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-控制台乱码解决"}},[t._v("#")]),t._v(" 4.2 控制台乱码解决")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("方案一：")]),t._v(" ​打开 IntelliJ IDEA 安装目录 , 在 bin 目录下找到 ​​idea64.exe.vmoptions​​ 文件 , 在文件的最后一行添加 ​​-Dfile.encoding=utf-8​​ 内容 ;")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("方案二：")]),t._v(" 如果闲找文件太麻烦 , 可以按照如下路径操作 , 菜单 -> Help -> Edit Custom VM OPtions , 也可以修改对应的 ideaXX.exe.vmoptions 文件配置 ;")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121648.png",alt:"20221203121648"}}),t._v(" "),a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121537.png",alt:"20221203121537"}})]),t._v(" "),a("h2",{attrs:{id:"五、第一行插件代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、第一行插件代码"}},[t._v("#")]),t._v(" 五、第一行插件代码")]),t._v(" "),a("h3",{attrs:{id:"_5-1-添加action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-添加action"}},[t._v("#")]),t._v(" 5.1 添加Action")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121706.png",alt:"20221203121706"}})]),t._v(" "),a("p",[t._v("通过快捷创建Action的方式，可以自动生成对应的类，并且将Action添加到plugin.xml的action中")]),t._v(" "),a("p",[t._v("除了这种方式，也可以手动创建Java类，并配置plugin.xml文件")]),t._v(" "),a("h3",{attrs:{id:"_5-2-填写action信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-填写action信息"}},[t._v("#")]),t._v(" 5.2 填写Action信息")]),t._v(" "),a("p",[t._v("创建Action需要配置的基本信息")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121751.png",alt:"20221203121751"}})]),t._v(" "),a("p",[t._v("填写完成后，点击Ok按钮")]),t._v(" "),a("h3",{attrs:{id:"_5-3-实现弹窗hello-world"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-实现弹窗hello-world"}},[t._v("#")]),t._v(" 5.3 实现弹窗Hello World")]),t._v(" "),a("p",[t._v("我们在actionPerformed中实现触发action之后的功能代码")]),t._v(" "),a("p",[t._v("这里通过Messages.showInfoMessage接口，弹出一个信息提示弹窗，展示西方古老的问候语Hello world!")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121833.png",alt:"20221203121833"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121848.png",alt:"20221203121848"}})]),t._v(" "),a("h2",{attrs:{id:"六、插件运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、插件运行"}},[t._v("#")]),t._v(" 六、插件运行")]),t._v(" "),a("p",[t._v("如果我们是新建的插件工程，那么字tools bar工具栏可以直接点击按钮运行")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121916.png",alt:"20221203121916"}})]),t._v(" "),a("p",[t._v("如果我们是打开的Gradle工程，可能tool bar没有信息\n我们可以通过gradle runIde命令直接启动运行插件")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121927.png",alt:"20221203121927"}})]),t._v(" "),a("p",[t._v("插件点击运行后，会自动打开一个调试插件用的idea窗口")]),t._v(" "),a("p",[t._v("这个调试的idea是社区版的")]),t._v(" "),a("p",[t._v("我们可以选择创建一个项目、或者打开一个项目，来体验我们的插件功能")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203121941.png",alt:"20221203121941"}})]),t._v(" "),a("p",[t._v("可以看到，我们刚刚定义的插件，在Tools的View PSI Structure…的下一个位置\n"),a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203122001.png",alt:"20221203122001"}})]),t._v(" "),a("p",[t._v("点击Say Helo，idea弹窗展示了古老问候语，\n同样的，我们也可以按刚刚设置的快捷键ctrl+K，弹出该信息\n点击Ok，你将正式成为一名idea插件开发入门者")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203122011.png",alt:"20221203122011"}})]),t._v(" "),a("h2",{attrs:{id:"七、给插件添加logo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、给插件添加logo"}},[t._v("#")]),t._v(" 七、给插件添加Logo")]),t._v(" "),a("p",[t._v("官方文档: https://plugins.jetbrains.com/docs/intellij/plugin-icon-file.html#adding-plugin-logo-files-to-a-plugin-project")]),t._v(" "),a("p",[t._v("命名规则：")]),t._v(" "),a("p",[t._v("pluginIcon.svg  默认图标。如果包含深色主题图标，那么该图标仅在亮色主题显示\npluginIcon_dark.svg  深色主题图标，该文件是可选的，如果存在该文件，那么深色主题使用该图标")]),t._v(" "),a("p",[t._v("文件位置：\n放在项目resources/META-INF目录下")]),t._v(" "),a("p",[t._v("文件格式：")]),t._v(" "),a("p",[t._v("必须使用svg格式矢量图标，理想大小为2-3KB")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://picqq.oss-cn-shenzhen.aliyuncs.com//pic/md/20221203122114.png",alt:"20221203122114"}})]),t._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://plugins.jetbrains.com/docs/intellij/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);